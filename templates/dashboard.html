<!doctype html>
<html lang="pt-BR">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

  <title>Dashboard</title>
  <style type="text/css">
    .farol {
      height: 25px;
      width: 25px;
      background-color: #bbb;
      border-radius: 50%;
      display: inline-block;
    }

    .vermelho {
      background-color: rgb(255, 0, 0);
    }

    .amarelo {
      background-color: rgb(255, 208, 0);
    }

    .verde {
      background-color: rgb(0, 199, 10);
    }
  </style>
</head>

<body>

  <h3>Arquivo atualizado em: {{dataModificacao}}</h3>
  <div class="container mt-4 mb-5">
    <h1>Projetos Priorizados</h1>
    <div class="row row-cols-1 row-cols-md-4 g-4">
      {% for projeto in projetos %}
      <div class="col">
        {% if projeto.status == 'execucao' %}
        <div class="card h-100 text-white bg-success mb-3">
          {% elif projeto.status == 'diagnostico' %}
          <div class="card h-100 text-white bg-primary mb-3">
            {% else %}
            <div class="card h-100 text-white bg-dark mb-3">
              {% endif %}
              <div class="card-body">
                <h5 class="card-title">{{ projeto.nome }}</h5>
                <p class="card-text">Líder: {{ projeto.lider }} <br /> Órgão: {{ projeto.sigla_orgao }} -</p>
              </div>
            </div>
          </div>
          {% endfor %}
          <!-- {{projetos}} -->
        </div>

      </div>
      <div class="container">
        <div class="row">
          <h1>Startup EM Execução</h1>
          {{execucao|safe}}
        </div>
      </div>
      <div class="container">
        <div class="row">
          <h1>Startup EM Diagnostico</h1>
          {{diagnostico|safe}}
        </div>
      </div>


      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>

      <script>
        function alterarFarois(idtabela) {
          let tabela = document.getElementById(idtabela);
          let farol = "";
          for (let i = 1; i < tabela.rows.length; i++) {
            farol = tabela.rows[i].cells[4].innerHTML;
            if (farol == "VERMELHO") {
              tabela.rows[i].cells[4].outerHTML =
                "<td><span class='farol vermelho'></span></td>";
            } else if (farol == "AMARELO") {
              tabela.rows[i].cells[4].outerHTML =
                "<td><span class='farol amarelo'></span></td>";
            } else if (farol == "VERDE") {
              tabela.rows[i].cells[4].outerHTML =
                "<td><span class='farol verde'></span></td>";
            } else {
              tabela.rows[i].cells[4].outerHTML =
                "<td><span class='farol'></span></td>";
            }
          }
        }
        window.onload = () => {
          alterarFarois("emExecucao");
          alterarFarois("emDiagnostico");
        }
      </script>

</body>

</html>